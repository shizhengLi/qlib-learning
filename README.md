# Qlibæ·±åº¦å­¦ä¹ ä¸æŠ€æœ¯å®è·µæŒ‡å—

> æ·±å…¥è§£æå¾®è½¯å¼€æºé‡åŒ–æŠ•èµ„æ¡†æ¶Qlibçš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒæŠ€æœ¯ä¸å®è·µåº”ç”¨

## ğŸ“– é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†å¯¹å¾®è½¯å¼€æºé‡åŒ–æŠ•èµ„æ¡†æ¶[Qlib](https://github.com/microsoft/qlib)çš„æ·±åº¦æŠ€æœ¯åˆ†æï¼ŒåŒ…å«10ç¯‡è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£ï¼Œæ€»è®¡çº¦40ä¸‡å­—ã€‚é¡¹ç›®æ·±å…¥è§£æäº†Qlibçš„æºä»£ç æ¶æ„ã€æ ¸å¿ƒç»„ä»¶ã€è®¾è®¡ç†å¿µå’Œæœ€ä½³å®è·µï¼Œä¸ºé‡åŒ–æŠ•èµ„ç ”ç©¶è€…å’Œå¼€å‘è€…æä¾›å…¨é¢çš„æŠ€æœ¯æŒ‡å¯¼ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- æ·±å…¥ç†è§£Qlibçš„æ¶æ„è®¾è®¡æ€æƒ³å’Œå®ç°åŸç†
- æŒæ¡æ•°æ®ç®¡ç†ã€å› å­å·¥ç¨‹ã€æœºå™¨å­¦ä¹ æ¨¡å‹ç­‰æ ¸å¿ƒæŠ€æœ¯
- å­¦ä¹ æ„å»ºç”Ÿäº§çº§é‡åŒ–æŠ•èµ„ç³»ç»Ÿçš„æœ€ä½³å®è·µ
- äº†è§£é‡åŒ–æŠ•èµ„é¢†åŸŸçš„æœ€æ–°æŠ€æœ¯å‘å±•è¶‹åŠ¿

## ğŸ“š æŠ€æœ¯æ–‡æ¡£ç›®å½•

### ğŸ—ï¸ æ¶æ„ä¸åŸºç¡€
- **[01-qlib-architecture-overview.md](./tech-blog/01-qlib-architecture-overview.md)** - Qlibæ¶æ„æ·±åº¦è§£æ
  - æ•´ä½“æ¶æ„è®¾è®¡
  - æ ¸å¿ƒç»„ä»¶å…³ç³»
  - è®¾è®¡æ¨¡å¼åº”ç”¨
  - éƒ¨ç½²æ¶æ„æ–¹æ¡ˆ

### ğŸ’¾ æ•°æ®ç®¡ç†
- **[02-data-management-system.md](./tech-blog/02-data-management-system.md)** - æ•°æ®ç®¡ç†ç³»ç»ŸæŠ€æœ¯è§£æ
  - è¡¨è¾¾å¼ç³»ç»Ÿå®ç°
  - Provideræ¨¡å¼è®¾è®¡
  - å¤šçº§ç¼“å­˜æ¶æ„
  - æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### ğŸ”¬ å› å­å·¥ç¨‹
- **[03-factor-engineering.md](./tech-blog/03-factor-engineering.md)** - å› å­å·¥ç¨‹æ·±åº¦è§£æ
  - Alpha158/Alpha360å› å­é›†
  - è¡¨è¾¾å¼è®¡ç®—å¼•æ“
  - å› å­æ•°æ®å¤„ç†
  - å› å­è¯„ä¼°æ¡†æ¶

### ğŸ¤– æœºå™¨å­¦ä¹ 
- **[04-machine-learning-models.md](./tech-blog/04-machine-learning-models.md)** - æœºå™¨å­¦ä¹ æ¨¡å‹æŠ€æœ¯è§£æ
  - æ¨¡å‹æ¡†æ¶è®¾è®¡
  - LightGBM/çº¿æ€§/æ·±åº¦å­¦ä¹ å®ç°
  - æ¨¡å‹é›†æˆä¸ä¼˜åŒ–
  - ç‰¹å¾é‡è¦æ€§åˆ†æ

### ğŸ“ˆ å›æµ‹ç³»ç»Ÿ
- **[05-backtesting-system.md](./tech-blog/05-backtesting-system.md)** - å›æµ‹ç³»ç»ŸæŠ€æœ¯è§£æ
  - äº‹ä»¶é©±åŠ¨æ¶æ„
  - äº¤æ˜“æ‰€æ¨¡æ‹Ÿç³»ç»Ÿ
  - è´¦æˆ·ä¸å¤´å¯¸ç®¡ç†
  - æˆæœ¬å»ºæ¨¡ä¸ä¼˜åŒ–

### ğŸ› ï¸ è´¡çŒ®è€…å·¥å…·
- **[06-contributor-tools.md](./tech-blog/06-contributor-tools.md)** - è´¡çŒ®è€…å·¥å…·æ·±åº¦è§£æ
  - ç­–ç•¥ç»„ä»¶æ¡†æ¶
  - æ•°æ®å¤„ç†å™¨å®ç°
  - æ¨¡å‹è®­ç»ƒç®¡é“
  - è‡ªåŠ¨åŒ–å·¥ä½œæµ

### ğŸ“¡ æ•°æ®é‡‡é›†
- **[07-data-collectors.md](./tech-blog/07-data-collectors.md)** - æ•°æ®é‡‡é›†å™¨æŠ€æœ¯è§£æ
  - Yahoo Financeæ•°æ®é‡‡é›†
  - Tushare APIé›†æˆ
  - ç¾è‚¡æ•°æ®å¤„ç†
  - æ•°æ®è´¨é‡æ§åˆ¶

### ğŸš€ é«˜çº§åŠŸèƒ½
- **[08-advanced-features.md](./tech-blog/08-advanced-features.md)** - é«˜çº§åŠŸèƒ½æŠ€æœ¯è§£æ
  - å¼ºåŒ–å­¦ä¹ äº¤æ˜“ç³»ç»Ÿ
  - Transformeræ—¶é—´åºåˆ—é¢„æµ‹
  - åŠ¨æ€é£é™©é¢„ç®—æ¨¡å‹
  - é£é™©å½’å› åˆ†æ

### ğŸ“– APIå‚è€ƒ
- **[09-api-reference.md](./tech-blog/09-api-reference.md)** - APIå‚è€ƒæ‰‹å†Œ
  - æ ¸å¿ƒæ¨¡å—API
  - æ•°æ®è®¿é—®æ¥å£
  - æ¨¡å‹è®­ç»ƒAPI
  - å›æµ‹æ‰§è¡Œæ¥å£

### â­ æœ€ä½³å®è·µ
- **[10-best-practices.md](./tech-blog/10-best-practices.md)** - æœ€ä½³å®è·µæŒ‡å—
  - é¡¹ç›®æ¶æ„è®¾è®¡
  - æ•°æ®ç®¡ç†ç­–ç•¥
  - æ¨¡å‹å¼€å‘è§„èŒƒ
  - ç”Ÿäº§éƒ¨ç½²æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
Python >= 3.7
qlib >= 0.8.0
pandas >= 1.3.0
numpy >= 1.21.0
scikit-learn >= 1.0.0
```

### å®‰è£…Qlib

```bash
# å®‰è£…æœ€æ–°ç‰ˆæœ¬
pip install pyqlib

# ä»æºç å®‰è£…
git clone https://github.com/microsoft/qlib.git
cd qlib
pip install .
```

### æ•°æ®å‡†å¤‡

```python
import qlib
from qlib.data import D

# åˆå§‹åŒ–Qlib
qlib.init(provider_uri="~/.qlib/qlib_data/cn_data")

# è·å–è‚¡ç¥¨åˆ—è¡¨
csi300 = D.instruments("csi300")
print(f"æ²ªæ·±300æˆåˆ†è‚¡: {len(csi300)} åª")

# è·å–ä»·æ ¼æ•°æ®
features = D.features(
    csi300[:10],  # å‰10åªè‚¡ç¥¨
    ["$close", "$volume"],
    "2023-01-01",
    "2023-12-31"
)
print(f"ç‰¹å¾æ•°æ®å½¢çŠ¶: {features.shape}")
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
qlib-learning/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ qlib/                     # Qlibæºä»£ç ï¼ˆä¾›å‚è€ƒï¼‰
â”‚   â”œâ”€â”€ qlib/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data/            # æ•°æ®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ model/           # æœºå™¨å­¦ä¹ æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ backtest/        # å›æµ‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ contrib/         # è´¡çŒ®è€…æ¨¡å—
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ docs/
â”œâ”€â”€ tech-blog/               # æŠ€æœ¯åšå®¢æ–‡æ¡£
â”‚   â”œâ”€â”€ 01-qlib-architecture-overview.md
â”‚   â”œâ”€â”€ 02-data-management-system.md
â”‚   â”œâ”€â”€ 03-factor-engineering.md
â”‚   â”œâ”€â”€ 04-machine-learning-models.md
â”‚   â”œâ”€â”€ 05-backtesting-system.md
â”‚   â”œâ”€â”€ 06-contributor-tools.md
â”‚   â”œâ”€â”€ 07-data-collectors.md
â”‚   â”œâ”€â”€ 08-advanced-features.md
â”‚   â”œâ”€â”€ 09-api-reference.md
â”‚   â””â”€â”€ 10-best-practices.md
â””â”€â”€ examples/                # ç¤ºä¾‹ä»£ç 
    â”œâ”€â”€ basic_usage.py
    â”œâ”€â”€ factor_engineering.py
    â”œâ”€â”€ model_training.py
    â””â”€â”€ backtesting.py
```

## ğŸ’¡ æ ¸å¿ƒç‰¹æ€§

### ğŸ›ï¸ åˆ†å±‚æ¶æ„è®¾è®¡
Qlibé‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œå°†å¤æ‚çš„é‡åŒ–æŠ•èµ„æµç¨‹åˆ†è§£ä¸ºï¼š
- **åº”ç”¨å±‚**: ç­–ç•¥å›æµ‹ã€ç»©æ•ˆåˆ†æã€é£é™©ç®¡ç†
- **ä¸šåŠ¡é€»è¾‘å±‚**: ç­–ç•¥ç®¡ç†ã€æ¨¡å‹ç®¡ç†ã€å› å­å·¥ç¨‹
- **æœåŠ¡å±‚**: å›æµ‹æœåŠ¡ã€æ•°æ®æœåŠ¡ã€è®¡ç®—æœåŠ¡
- **æ•°æ®å±‚**: æ•°æ®å­˜å‚¨ã€ç¼“å­˜ç³»ç»Ÿã€è¡¨è¾¾å¼å¼•æ“

### ğŸ”§ æ¨¡å—åŒ–ç»„ä»¶
- **æ•°æ®ç®¡ç†**: ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£å’ŒProvideræ¨¡å¼
- **è¡¨è¾¾å¼ç³»ç»Ÿ**: å¼ºå¤§çš„é‡‘èæ•°æ®è®¡ç®—å¼•æ“
- **æœºå™¨å­¦ä¹ **: ä¸°å¯Œçš„æ¨¡å‹å®ç°å’Œé›†æˆæ¡†æ¶
- **å›æµ‹ç³»ç»Ÿ**: ä¸“ä¸šçº§çš„äº‹ä»¶é©±åŠ¨å›æµ‹å¼•æ“

### ğŸ¯ è®¾è®¡ä¼˜åŠ¿
- **é«˜æ€§èƒ½**: å¤šçº§ç¼“å­˜å’Œå¹¶è¡Œè®¡ç®—ä¼˜åŒ–
- **å¯æ‰©å±•æ€§**: æ’ä»¶åŒ–æ¶æ„æ”¯æŒåŠŸèƒ½æ‰©å±•
- **æ˜“ç”¨æ€§**: ç®€æ´ç»Ÿä¸€çš„APIæ¥å£
- **ç”Ÿäº§å°±ç»ª**: å®Œå–„çš„æ—¥å¿—ã€ç›‘æ§å’Œéƒ¨ç½²æ”¯æŒ

## ğŸ“Š æŠ€æœ¯äº®ç‚¹

### è¡¨è¾¾å¼è®¡ç®—å¼•æ“
```python
from qlib.data.ops import *

# åˆ›å»ºå¤æ‚é‡‘èè¡¨è¾¾å¼
close = Feature('$close')
volume = Feature('$volume')
ma_5 = RollingMean(close, 5)
ma_20 = RollingMean(close, 20)

# æ„å»ºå¤åˆå› å­
momentum = close / Ref(close, 20) - 1
volume_ratio = volume / RollingMean(volume, 20)
composite_factor = momentum * 0.6 + volume_ratio * 0.4
```

### é›†æˆå­¦ä¹ æ¨¡å‹
```python
from qlib.contrib.model.gbdt import LGBModel
from qlib.model.ens.ensemble import AverageEnsemble

# è®­ç»ƒå¤šä¸ªæ¨¡å‹
models = [LGBModel(), LGBModel(learning_rate=0.03), LGBModel(learning_rate=0.1)]

# é›†æˆé¢„æµ‹
ensemble = AverageEnsemble()
predictions = ensemble({f"model_{i}": model.predict(data) for i, model in enumerate(models)})
```

### ä¸“ä¸šå›æµ‹æ¡†æ¶
```python
from qlib.backtest.executor import SimulatorExecutor

# æ‰§è¡Œå›æµ‹
executor = SimulatorExecutor()
results = executor.execute(
    strategy=strategy,
    start_time="2020-01-01",
    end_time="2023-12-31",
    account_kwargs={"init_cash": 1000000},
    exchange_kwargs={"commission_rate": 0.0003}
)
```

## ğŸ“ˆ åº”ç”¨åœºæ™¯

### 1. é‡åŒ–ç ”ç©¶
- å› å­æŒ–æ˜ä¸éªŒè¯
- ç­–ç•¥å›æµ‹ä¸ä¼˜åŒ–
- é£é™©æ¨¡å‹æ„å»º

### 2. èµ„äº§ç®¡ç†
- æŠ•èµ„ç»„åˆä¼˜åŒ–
- é£é™©é¢„ç®—ç®¡ç†
- ç»©æ•ˆå½’å› åˆ†æ

### 3. ç®—æ³•äº¤æ˜“
- é«˜é¢‘ç­–ç•¥å¼€å‘
- è®¢å•æ‰§è¡Œä¼˜åŒ–
- å®æ—¶é£é™©ç›‘æ§

### 4. å­¦æœ¯ç ”ç©¶
- é‡‘èæ•°æ®åˆ†æ
- æœºå™¨å­¦ä¹ ç ”ç©¶
- æŠ•èµ„ç†è®ºéªŒè¯

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·é˜…è¯»ä»¥ä¸‹æŒ‡å—ï¼š

### å¦‚ä½•è´¡çŒ®
1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

### è´¡çŒ®ç±»å‹
- ğŸ“ æ–‡æ¡£æ”¹è¿›
- ğŸ› BugæŠ¥å‘Šå’Œä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ§ª æµ‹è¯•ç”¨ä¾‹æ·»åŠ 
- ğŸ’¡ ä»£ç ä¼˜åŒ–

## ğŸ“– å­¦ä¹ è·¯å¾„

### åˆå­¦è€…è·¯å¾„
1. é˜…è¯»[Qlibæ¶æ„æ¦‚è¿°](./tech-blog/01-qlib-architecture-overview.md)
2. å­¦ä¹ [æ•°æ®ç®¡ç†ç³»ç»Ÿ](./tech-blog/02-data-management-system.md)
3. å®è·µ[åŸºç¡€APIä½¿ç”¨](./tech-blog/09-api-reference.md)

### è¿›é˜¶è·¯å¾„
1. æ·±å…¥[å› å­å·¥ç¨‹](./tech-blog/03-factor-engineering.md)
2. æŒæ¡[æœºå™¨å­¦ä¹ æ¨¡å‹](./tech-blog/04-machine-learning-models.md)
3. å­¦ä¹ [å›æµ‹ç³»ç»Ÿ](./tech-blog/05-backtesting-system.md)

### é«˜çº§è·¯å¾„
1. æ¢ç´¢[é«˜çº§åŠŸèƒ½](./tech-blog/08-advanced-features.md)
2. å®è·µ[æœ€ä½³å®è·µ](./tech-blog/10-best-practices.md)
3. ç ”ç©¶[è´¡çŒ®è€…å·¥å…·](./tech-blog/06-contributor-tools.md)

## ğŸ“š å‚è€ƒèµ„æ–™

### å®˜æ–¹èµ„æº
- [Qlib GitHubä»“åº“](https://github.com/microsoft/qlib)
- [Qlibå®˜æ–¹æ–‡æ¡£](https://qlib.readthedocs.io/)
- [Qlibè®ºæ–‡](https://arxiv.org/abs/2009.06667)

### ç›¸å…³é¡¹ç›®

- [QuantStats](https://github.com/ranaroussi/quantstats)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹[LICENSE](LICENSE)æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢å¾®è½¯Qlibå›¢é˜Ÿæä¾›çš„ä¼˜ç§€å¼€æºæ¡†æ¶
- æ„Ÿè°¢Qlibç¤¾åŒºçš„æ”¯æŒå’Œè´¡çŒ®
- æ„Ÿè°¢æ‰€æœ‰ä¸ºé‡åŒ–æŠ•èµ„é¢†åŸŸåšå‡ºè´¡çŒ®çš„ç ”ç©¶è€…å’Œå¼€å‘è€…

---


â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼

ğŸš€ è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„é‡åŒ–æŠ•èµ„ç”Ÿæ€ç³»ç»Ÿï¼